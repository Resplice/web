<script lang="ts">
	import { createAvatar } from '@dicebear/core'
	import { thumbs } from '@dicebear/collection'
	export let uuid: string
	export let src: string | null
	export let size: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | '2xl' = 'md'

	const svgWidthMap = {
		xs: 8,
		sm: 20,
		md: 32,
		lg: 48,
		xl: 128,
		'2xl': 240
	}
	const imageWidthMap = {
		xs: 24,
		sm: 36,
		md: 48,
		lg: 64,
		xl: 144,
		'2xl': 256
	}
	const svg = createAvatar(thumbs, { seed: uuid, size: svgWidthMap[size] })
</script>

<button class="bg-gray-100 rounded-full w-max" class:p-2={!src} on:click>
	{#if src}
		<img class="rounded-full" {src} loading="lazy" width={imageWidthMap[size]} alt={uuid} />
	{:else}
		{@html svg}
	{/if}
</button>
